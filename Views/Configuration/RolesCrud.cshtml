
@model Roles

<div class="card">
    <div class="card-header">
        <h4>Roles</h4>
    </div>
    <form id="frm">
        <div class="card-body">
            <input type="hidden" asp-for="RoleId" class="form-control">
            <div class="form-group">
                <label>Name</label>
                <input type="text" asp-for="RoleName" class="form-control" required>
            </div>
            <div class="form-group">
                <label>Description</label>
                <input type="text" class="form-control" asp-for="Description">
            </div>

        </div>
        <div class="card-footer text-left">
            <button class="btn btn-primary mr-1" id="btnSave" type="submit">Save</button>
            <button class="btn btn-dark" id="btnCancel" type="button">Cancel</button>
        </div>

    </form>
</div>


<script>

    $(() => {
        $('#btnSave').click(function () {
            save();
        });


        $('#btnCancel').click(function () {
            LoadRoles();
        });

    })



    function save() {
        //validate form and post request
        $('#frm').unbind('submit').submit(function (e) {
            e.preventDefault();

            $.ajax({
                url: '@Url.Action("Save", "Configuration")', type: "POST", dataType: "json",
                data: $("#frm").serialize(),
                success: function (data) {
                    console.log(data);
                    data = JSON.parse(data);
                    if (data[1] == "success") {
                        notification(data[1], data[0]);
                        LoadRoles();
                    }
                    else {
                        notification(data[1], data[0]);
                    }
                        
                    
                },
                error: function (xhr, status, error) {

                }
            });
        });
    }
</script>
